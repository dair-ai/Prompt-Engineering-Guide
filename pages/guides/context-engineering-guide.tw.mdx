# **è„ˆçµ¡å·¥ç¨‹ï¼ˆContext Engineeringï¼‰æŒ‡å—**

## **ç›®éŒ„**

* [ä»€éº¼æ˜¯è„ˆçµ¡å·¥ç¨‹ï¼Ÿ](#what-is-context-engineering)
* [è„ˆçµ¡å·¥ç¨‹å¯¦æˆ°](#context-engineering-in-action)
  * [System Promptï¼ˆç³»çµ±æç¤ºè©ï¼‰](#system-prompt)
  * [Instructionsï¼ˆæŒ‡ä»¤ï¼‰](#instructions)
  * [User Inputï¼ˆä½¿ç”¨è€…è¼¸å…¥ï¼‰](#user-input)
  * [Structured Inputs and Outputsï¼ˆçµæ§‹åŒ–è¼¸å…¥èˆ‡è¼¸å‡ºï¼‰](#structured-inputs-and-outputs)
  * [Toolsï¼ˆå·¥å…·ï¼‰](#tools)
  * [RAG & Memoryï¼ˆRAG èˆ‡è¨˜æ†¶ï¼‰](#rag--memory)
  * [States & Historical Contextï¼ˆç‹€æ…‹èˆ‡æ­·å²è„ˆçµ¡ï¼‰](#states--historical-context)
* [é€²éšè„ˆçµ¡å·¥ç¨‹](#advanced-context-engineering-wip)
* [å»¶ä¼¸è³‡æº](#resources)



## **What is Context Engineering?**

å¹¾å¹´å‰ï¼Œå¾ˆå¤šäººâ”€â”€ç”šè‡³åŒ…å«é ‚å°–çš„ AI ç ”ç©¶è€…â”€â”€éƒ½èªç‚ºæç¤ºè©å·¥ç¨‹åˆ°äº†ä»Šå¤©æ‡‰è©²æ—©å°±ã€Œéæ™‚ã€äº†ã€‚

é¡¯ç„¶é€™å€‹åˆ¤æ–·å¤§éŒ¯ç‰¹éŒ¯ï¼›äº‹å¯¦ä¸Šï¼Œæç¤ºè©å·¥ç¨‹ç¾åœ¨æ¯”ä»¥å¾€æ›´é‡è¦ï¼Œé‡è¦åˆ°é–‹å§‹è¢«é‡æ–°åŒ…è£æˆ ***context engineering***ã€‚

æ²’éŒ¯ï¼Œåˆæ˜¯ä¸€å€‹èŠ±ä¿çš„æ–°åè©ï¼Œç”¨ä¾†æè¿°åŒä¸€ä»¶é—œéµçš„äº‹ï¼šèª¿æ•´æŒ‡ä»¤èˆ‡ç›¸é—œè„ˆçµ¡ï¼Œè®“ LLM èƒ½æœ‰æ•ˆå®Œæˆä»»å‹™ã€‚

é—œæ–¼è„ˆçµ¡å·¥ç¨‹ï¼Œå·²ç¶“æœ‰ä¸å°‘äººåˆ†äº«éï¼ˆ[Ankur Goyal](https://x.com/ankrgyl/status/1913766591910842619)ã€[Walden Yan](https://cognition.ai/blog/dont-build-multi-agents)ã€[Tobi Lutke](https://x.com/tobi/status/1935533422589399127)ã€ä»¥åŠ [Andrej Karpathy](https://x.com/karpathy/status/1937902205765607626)ï¼‰ï¼Œä½†é€™è£¡ä»æƒ³æ•´ç†ä¸€äº›æƒ³æ³•ï¼Œä¸¦ç”¨ä¸€å€‹å…·é«”çš„é€æ­¥æŒ‡å—ï¼Œç¤ºç¯„åœ¨é–‹ç™¼ AI agent å·¥ä½œæµç¨‹æ™‚ï¼Œå¦‚ä½•æŠŠè„ˆçµ¡å·¥ç¨‹è½åœ°å¯¦ä½œã€‚

ä¸ç¢ºå®šã€Œcontext engineeringã€æœ€æ—©æ˜¯èª°æå‡ºçš„ï¼Œä½†é€™è£¡æœƒä»¥ [Dex Horthy](https://x.com/dexhorthy/status/1933283008863482067) çš„é€™å¼µåœ–ä½œç‚ºèµ·é»ï¼Œå¿«é€Ÿèªªæ˜è„ˆçµ¡å·¥ç¨‹å¤§è‡´æ¶µè“‹å“ªäº›å…§å®¹ã€‚

![A diagram showing overlapping aspects of context engineering](../../img/context-engineering-guide/context-engineering-diagram.jpg)

æˆ‘å–œæ­¡ã€Œè„ˆçµ¡å·¥ç¨‹ã€é€™å€‹èªªæ³•ï¼Œå› ç‚ºå®ƒæ˜¯ä¸€å€‹æ›´å»£çš„æ¦‚å¿µï¼Œèƒ½æ›´è²¼åˆ‡åœ°æ¶µè“‹æç¤ºè©å·¥ç¨‹çš„å·¥ä½œå…§å®¹ï¼Œä»¥åŠè¨±å¤šç›¸é—œä»»å‹™ã€‚

ä¹‹æ‰€ä»¥æœ‰äººè³ªç–‘æç¤ºè©å·¥ç¨‹æ˜¯å¦ç®—ä¸€é …ã€Œåš´è‚…æŠ€èƒ½ã€ï¼Œå¾€å¾€æ˜¯å› ç‚ºæŠŠå®ƒèˆ‡ blind prompting æ··ç‚ºä¸€è«‡ï¼ˆä¹Ÿå°±æ˜¯åœ¨åƒ ChatGPT é€™é¡ LLM ç›´æ¥ä¸Ÿä¸€æ®µç°¡çŸ­ä»»å‹™æè¿°ï¼‰ã€‚åœ¨ blind prompting è£¡ï¼ŒåŸºæœ¬ä¸Šå°±æ˜¯ç›´æ¥å•ç³»çµ±ä¸€å€‹å•é¡Œï¼›ä½†åœ¨æç¤ºè©å·¥ç¨‹è£¡ï¼Œéœ€è¦æ›´ä»”ç´°æ€è€ƒæç¤ºè©çš„è„ˆçµ¡èˆ‡çµæ§‹ã€‚æˆ–è¨±å¾ä¸€é–‹å§‹å°±å«ã€Œè„ˆçµ¡å·¥ç¨‹ã€æœƒæ›´è²¼åˆ‡ã€‚

è„ˆçµ¡å·¥ç¨‹å¯ä»¥è¦–ç‚ºä¸‹ä¸€éšæ®µï¼šé–‹å§‹ã€Œè¨­è¨ˆå®Œæ•´è„ˆçµ¡ã€ï¼Œå¾ˆå¤šæ™‚å€™ä¸å†åªæ˜¯å¯«æç¤ºè©ï¼Œè€Œæ˜¯ç”¨æ›´åš´è¬¹çš„æ–¹æ³•å–å¾—ã€å¼·åŒ–èˆ‡æœ€ä½³åŒ–ç³»çµ±æ‰€éœ€çš„çŸ¥è­˜ã€‚

å¾é–‹ç™¼è€…çš„è§’åº¦ä¾†çœ‹ï¼Œè„ˆçµ¡å·¥ç¨‹æ˜¯ä¸€å€‹åè¦†è¿­ä»£çš„æµç¨‹ï¼šä¸æ–·èª¿æ•´æŒ‡ä»¤èˆ‡æä¾›çµ¦ LLM çš„è„ˆçµ¡ï¼Œç›´åˆ°å¾—åˆ°æœŸæœ›çµæœã€‚é€™é€šå¸¸ä¹ŸåŒ…å«ä¸€å¥—æ›´æ­£å¼çš„æµç¨‹ï¼ˆä¾‹å¦‚ eval pipelinesï¼‰ä¾†è¡¡é‡ç­–ç•¥æ˜¯å¦æœ‰æ•ˆã€‚

è€ƒé‡ AI é ˜åŸŸæ¼”é€²éå¸¸å¿«é€Ÿï¼Œé€™è£¡å…ˆçµ¦ä¸€å€‹è¼ƒå»£ç¾©çš„å®šç¾©ï¼š***è„ˆçµ¡å·¥ç¨‹å°±æ˜¯ç‚ºäº†è®“ LLM èˆ‡å„å¼é€²éš AI æ¨¡å‹èƒ½æœ‰æ•ˆå®Œæˆä»»å‹™ï¼Œè€Œè¨­è¨ˆä¸¦æœ€ä½³åŒ–æŒ‡ä»¤èˆ‡ç›¸é—œè„ˆçµ¡çš„éç¨‹ã€‚*** é€™ä¸åªæ¶µè“‹ä»¥æ–‡å­—ç‚ºä¸»çš„ LLMï¼Œä¹ŸåŒ…å«é‡å°è¶Šä¾†è¶Šæ™®åŠçš„å¤šæ¨¡æ…‹æ¨¡å‹ï¼ˆmultimodal modelsï¼‰æ‰€åšçš„è„ˆçµ¡æœ€ä½³åŒ–ã€‚è„ˆçµ¡å·¥ç¨‹å¯ä»¥åŒ…å«æ‰€æœ‰æç¤ºè©å·¥ç¨‹ç›¸é—œå·¥ä½œï¼Œä»¥åŠä¾‹å¦‚ä¸‹åˆ—é€™äº›æµç¨‹ï¼š

* è¨­è¨ˆèˆ‡ç®¡ç† prompt chainsï¼ˆè‹¥é©ç”¨ï¼‰
* èª¿æ•´æŒ‡ä»¤ï¼system prompts
* ç®¡ç†æç¤ºè©ä¸­çš„å‹•æ…‹å…ƒç´ ï¼ˆä¾‹å¦‚ä½¿ç”¨è€…è¼¸å…¥ã€æ—¥æœŸæ™‚é–“ç­‰ï¼‰
* æœå°‹ä¸¦æ•´ç†ç›¸é—œçŸ¥è­˜ï¼ˆä¹Ÿå°±æ˜¯ RAGï¼‰
* æŸ¥è©¢å¢å¼·ï¼ˆquery augmentationï¼‰
* å·¥å…·å®šç¾©èˆ‡ä½¿ç”¨èªªæ˜ï¼ˆåœ¨ agentic systems çš„æƒ…å¢ƒï¼‰
* æº–å‚™èˆ‡æœ€ä½³åŒ– few-shot demonstrations
* çµæ§‹åŒ–è¼¸å…¥èˆ‡è¼¸å‡ºï¼ˆä¾‹å¦‚ delimitersã€JSON schemaï¼‰
* çŸ­æœŸè¨˜æ†¶ï¼ˆä¾‹å¦‚ç®¡ç† stateï¼historical contextï¼‰èˆ‡é•·æœŸè¨˜æ†¶ï¼ˆä¾‹å¦‚å¾ vector store å–å›ç›¸é—œçŸ¥è­˜ï¼‰
* ä»¥åŠè¨±å¤šå…¶ä»–æœ‰åŠ©æ–¼æœ€ä½³åŒ– LLM system promptã€è®“ç³»çµ±é”æˆç›®æ¨™ä»»å‹™çš„æŠ€å·§ã€‚

æ›å¥è©±èªªï¼Œè„ˆçµ¡å·¥ç¨‹æƒ³åšåˆ°çš„ï¼Œå°±æ˜¯åœ¨ LLM çš„ context window å…§ï¼Œè®“è¢«æä¾›çš„è³‡è¨Šæœ€æœ‰åŠ©æ–¼å®Œæˆä»»å‹™ï¼›åŒæ™‚ä¹Ÿä»£è¡¨è¦æŠŠé›œè¨Šè³‡è¨Šéæ¿¾æ‰ã€‚é€™æœ¬èº«ä¹Ÿæ˜¯ä¸€é–€å­¸å•ï¼Œå› ç‚ºéœ€è¦ç”¨ç³»çµ±åŒ–çš„æ–¹æ³•è¡¡é‡ LLM çš„è¡¨ç¾ã€‚

é›–ç„¶å¤§å®¶éƒ½åœ¨è«‡è„ˆçµ¡å·¥ç¨‹ï¼Œä½†é€™è£¡æœƒç”¨ä¸€å€‹å…·é«”ä¾‹å­ï¼Œå¸¶ä½ ç†è§£åœ¨å»ºæ§‹ AI agents æ™‚ï¼Œè„ˆçµ¡å·¥ç¨‹å¯¦éš›æœƒé•·ä»€éº¼æ¨£å­ã€‚


## **Context Engineering in Action**

ä¾†çœ‹ä¸€å€‹æˆ‘æœ€è¿‘ç‚ºå€‹äººç”¨é€”åšçš„è„ˆçµ¡å·¥ç¨‹æ¡ˆä¾‹ï¼šæˆ‘åšäº†ä¸€å€‹ multi-agent çš„ deep research æ‡‰ç”¨ã€‚

æˆ‘æŠŠ agentic workflow å»ºåœ¨ n8n è£¡ï¼Œä½†å·¥å…·æœ¬èº«ä¸æ˜¯é‡é»ã€‚æˆ‘åšçš„æ•´é«” agent æ¶æ§‹å¦‚ä¸‹ï¼š

![An image of an n8n workflow displaying a multi-agent deep research application](../../img/context-engineering-guide/context-engineering-workflow.jpg)

åœ¨é€™å€‹ workflow ä¸­ï¼ŒSearch Planner agent çš„ä»»å‹™æ˜¯æ ¹æ“šä½¿ç”¨è€…æŸ¥è©¢ç”¢ç”Ÿæœå°‹è¨ˆç•«ã€‚

### **System Prompt**

ä»¥ä¸‹æ˜¯æˆ‘ç‚ºé€™å€‹ subagent æ•´ç†çš„ system promptï¼š

```
You are an expert research planner. Your task is to break down a complex research query (delimited by <user_query></user_query>) into specific search subtasks, each focusing on a different aspect or source type.

The current date and time is: {{ $now.toISO() }}

For each subtask, provide:
1. A unique string ID for the subtask (e.g., 'subtask_1', 'news_update')
2. A specific search query that focuses on one aspect of the main query
3. The source type to search (web, news, academic, specialized)
4. Time period relevance (today, last week, recent, past_year, all_time)
5. Domain focus if applicable (technology, science, health, etc.)
6. Priority level (1-highest to 5-lowest)

All fields (id, query, source_type, time_period, domain_focus, priority) are required for each subtask, except time_period and domain_focus which can be null if not applicable.

Create 2 subtasks that together will provide comprehensive coverage of the topic. Focus on different aspects, perspectives, or sources of information.

Each substask will include the following information:

id: str
query: str
source_type: str  # e.g., "web", "news", "academic", "specialized"
time_period: Optional[str] = None  # e.g., "today", "last week", "recent", "past_year", "all_time"
domain_focus: Optional[str] = None  # e.g., "technology", "science", "health"
priority: int  # 1 (highest) to 5 (lowest)

After obtaining the above subtasks information, you will add two extra fields. Those correspond to start_date and end_date. Infer this information given the current date and the time_period selected. start_date and end_date should use the format as in the example below:

"start_date": "2024-06-03T06:00:00.000Z",
"end_date": "2024-06-11T05:59:59.999Z",
```

é€™ä»½æç¤ºè©åŒ…å«è¨±å¤šéœ€è¦ä»”ç´°æ¬Šè¡¡çš„éƒ¨åˆ†ï¼šç©¶ç«Ÿè¦æä¾›å“ªäº›è„ˆçµ¡ï¼Œæ‰èƒ½è®“ planning agent æœ‰æ•ˆå®Œæˆä»»å‹™ã€‚å¯ä»¥çœ‹åˆ°ï¼Œé€™ä¸åªæ˜¯ã€Œå¯«ä¸€æ®µç°¡å–®æç¤ºè©ï¼æŒ‡ä»¤ã€è€Œå·²ï¼›è¦è®“æ¨¡å‹æŠŠäº‹æƒ…åšå¥½ï¼Œé€šå¸¸éœ€è¦åè¦†å¯¦é©—ï¼Œä¸¦è£œé½Šè¶³å¤ çš„é—œéµè„ˆçµ¡ã€‚

æ¥ä¸‹ä¾†æŠŠå•é¡Œæ‹†æˆå¹¾å€‹æ ¸å¿ƒå…ƒä»¶ï¼Œé€ä¸€èªªæ˜é€™äº›å…ƒä»¶ç‚ºä»€éº¼å°è„ˆçµ¡å·¥ç¨‹å¾ˆé‡è¦ã€‚

### **Instructions**

Instructions æŒ‡çš„æ˜¯æä¾›çµ¦ç³»çµ±çš„é«˜å±¤ç´šæŒ‡ä»¤ï¼Œç”¨ä¾†æ˜ç¢ºå‘Šè¨´å®ƒè¦åšä»€éº¼ã€‚

```
You are an expert research planner. Your task is to break down a complex research query (delimited by <user_query></user_query>) into specific search subtasks, each focusing on a different aspect or source type.
```

å¾ˆå¤šæ–°æ‰‹ï¼ˆç”šè‡³æ˜¯æœ‰ç¶“é©—çš„ AI é–‹ç™¼è€…ï¼‰å¾€å¾€å¯«åˆ°é€™è£¡å°±åœäº†ã€‚çœ‹éä¸Šé¢å®Œæ•´æç¤ºè©å¾Œï¼Œæ‡‰è©²èƒ½é«”æœƒï¼šè‹¥å¸Œæœ›ç³»çµ±ç…§è‘—æœŸå¾…çš„æ–¹å¼é‹ä½œï¼Œå°±å¿…é ˆæä¾›æ›´å¤šè„ˆçµ¡ã€‚é€™å°±æ˜¯è„ˆçµ¡å·¥ç¨‹åœ¨åšçš„äº‹ï¼šè®“ç³»çµ±æ›´æ¸…æ¥šå•é¡Œé‚Šç•Œï¼Œä»¥åŠæƒ³è¦å®ƒç”¢å‡ºçš„å…·é«”å…§å®¹èˆ‡æ ¼å¼ã€‚

### **User Input**

ä½¿ç”¨è€…è¼¸å…¥é›–ç„¶æ²’æœ‰ç›´æ¥å¯«åœ¨ system prompt è£¡ï¼Œä½†å¯ä»¥é•·å¾—åƒä¸‹é¢é€™æ¨£ï¼š

```
<user_query> What's the latest dev news from OpenAI? </user_query>
```

æ³¨æ„é€™è£¡ç”¨äº† delimitersï¼ŒæŠŠä½¿ç”¨è€…è¼¸å…¥åŒ…èµ·ä¾†ï¼Œè®“æç¤ºè©çµæ§‹æ›´æ¸…æ¥šã€‚é€™å¾ˆé‡è¦ï¼šä¸€æ–¹é¢èƒ½é™ä½æ··æ·†ï¼Œè®“æ¨¡å‹æ›´æ¸…æ¥šå“ªäº›æ˜¯ä½¿ç”¨è€…è¼¸å…¥ã€å“ªäº›æ˜¯è¦ç”¢å‡ºçš„å…§å®¹ï¼›å¦ä¸€æ–¹é¢ï¼Œæœ‰æ™‚è¼¸å…¥çš„è³‡è¨Šå‹æ…‹ä¹Ÿæœƒå½±éŸ¿æ¨¡å‹è©²å¦‚ä½•ç”¢å‡ºï¼ˆä¾‹å¦‚ï¼šquery æ˜¯è¼¸å…¥ï¼Œsubqueries æ˜¯è¼¸å‡ºï¼‰ã€‚

### **Structured Inputs and Outputs**

é™¤äº†é«˜å±¤ç´š instruction èˆ‡ user input å¤–ï¼Œä½ å¯èƒ½ä¹Ÿæ³¨æ„åˆ°ï¼šæˆ‘èŠ±äº†ä¸å°‘ç¯‡å¹…ï¼Œè©³ç´°è¦ç¯„ planning agent éœ€è¦ç”¢å‡ºçš„ subtasks æ¬„ä½èˆ‡ç´°ç¯€ã€‚ä»¥ä¸‹æ˜¯æˆ‘æä¾›çµ¦ planning agent çš„æ›´ç´°éƒ¨æŒ‡ç¤ºï¼Œè®“å®ƒèƒ½æ ¹æ“šä½¿ç”¨è€…æŸ¥è©¢ç”¢ç”Ÿ subtasksï¼š

```
For each subtask, provide:
1. A unique string ID for the subtask (e.g., 'subtask_1', 'news_update')
2. A specific search query that focuses on one aspect of the main query
3. The source type to search (web, news, academic, specialized)
4. Time period relevance (today, last week, recent, past_year, all_time)
5. Domain focus if applicable (technology, science, health, etc.)
6. Priority level (1-highest to 5-lowest)

All fields (id, query, source_type, time_period, domain_focus, priority) are required for each subtask, except time_period and domain_focus which can be null if not applicable.

Create 2 subtasks that together will provide comprehensive coverage of the topic. Focus on different aspects, perspectives, or sources of information.
```

ä»”ç´°çœ‹é€™æ®µæŒ‡ç¤ºå¯ä»¥ç™¼ç¾ï¼šæˆ‘æŠŠã€Œå¸Œæœ› agent ç”¢å‡ºçš„å¿…è¦è³‡è¨Šã€æ˜ç¢ºåˆ—æˆæ¸…å–®ï¼Œä¸¦è£œä¸Šä¸€äº› hints/examplesï¼Œå”åŠ©å¼•å°è³‡æ–™ç”¢ç”Ÿçš„æ–¹å‘ã€‚é€™å°æ–¼è®“ agent æ›´æ¸…æ¥šã€Œä»€éº¼æ‰ç®—ç¬¦åˆæœŸå¾…çš„è¼¸å‡ºã€éå¸¸é—œéµã€‚èˆ‰ä¾‹ä¾†èªªï¼Œè‹¥æ²’æœ‰æ˜è¬› priority level çš„å°ºåº¦æ˜¯ 1â€“5ï¼Œç³»çµ±å¾ˆå¯èƒ½æœƒè‡ªå·±æ”¹ç”¨ 1â€“10ã€‚å†æ¬¡å¼·èª¿ï¼šè„ˆçµ¡çœŸçš„å·®å¾ˆå¤šï¼

æ¥è‘—ä¾†è«‡ structured outputsã€‚ç‚ºäº†è®“ planning agent ç”¢å‡ºæ›´ä¸€è‡´çš„çµæœï¼Œæˆ‘å€‘ä¹Ÿæä¾›äº† subtask æ ¼å¼èˆ‡æ¬„ä½å‹åˆ¥çš„æç¤ºè©ï¼Œè®“å®ƒçŸ¥é“è¼¸å‡ºæ‡‰è©²é•·ä»€éº¼æ¨£å­ï¼š

```
Each substask will include the following information:

id: str
query: str
source_type: str  # e.g., "web", "news", "academic", "specialized"
time_period: Optional[str] = None  # e.g., "today", "last week", "recent", "past_year", "all_time"
domain_focus: Optional[str] = None  # e.g., "technology", "science", "health"
priority: int  # 1 (highest) to 5 (lowest)
```

æ­¤å¤–ï¼Œåœ¨ n8n è£¡ä¹Ÿèƒ½ä½¿ç”¨ tool output parserï¼Œç”¨ä¾†æŠŠæœ€çµ‚è¼¸å‡ºæ•´ç†æˆçµæ§‹åŒ–æ ¼å¼ã€‚æˆ‘ä½¿ç”¨çš„åšæ³•æ˜¯æä¾›ä¸€å€‹ JSON ç¯„ä¾‹ï¼š

```
{
  "subtasks": [
    {
      "id": "openai_latest_news",
      "query": "latest OpenAI announcements and news",
      "source_type": "news",
      "time_period": "recent",
      "domain_focus": "technology",
      "priority": 1,
      "start_date": "2025-06-03T06:00:00.000Z",
      "end_date": "2025-06-11T05:59:59.999Z"
    },
    {
      "id": "openai_official_blog",
      "query": "OpenAI official blog recent posts",
      "source_type": "web",
      "time_period": "recent",
      "domain_focus": "technology",
      "priority": 2,
      "start_date": "2025-06-03T06:00:00.000Z",
      "end_date": "2025-06-11T05:59:59.999Z"
    },
...
}
```

æ¥è‘—é€™å€‹å·¥å…·æœƒæ ¹æ“šç¯„ä¾‹è‡ªå‹•ç”¢ç”Ÿ schemaï¼Œè®“ç³»çµ±èƒ½è§£æä¸¦ç”¢å‡ºæ­£ç¢ºçš„ structured outputsï¼Œå¦‚ä¸‹ä¾‹æ‰€ç¤ºï¼š

```
[
  {
    "action": "parse",
    "response": {
      "output": {
        "subtasks": [
          {
            "id": "subtask_1",
            "query": "OpenAI recent announcements OR news OR updates",
            "source_type": "news",
            "time_period": "recent",
            "domain_focus": "technology",
            "priority": 1,
            "start_date": "2025-06-24T16:35:26.901Z",
            "end_date": "2025-07-01T16:35:26.901Z"
          },
          {
            "id": "subtask_2",
            "query": "OpenAI official blog OR press releases",
            "source_type": "web",
            "time_period": "recent",
            "domain_focus": "technology",
            "priority": 1.2,
            "start_date": "2025-06-24T16:35:26.901Z",
            "end_date": "2025-07-01T16:35:26.901Z"
          }
        ]
      }
    }
  }
]
```

é€™çœ‹èµ·ä¾†å¾ˆè¤‡é›œï¼Œä½†ç¾åœ¨è¨±å¤šå·¥å…·éƒ½å·²å…§å»º structured output åŠŸèƒ½ï¼Œæ‰€ä»¥å¾ˆå¯èƒ½ä¸éœ€è¦è‡ªå·±æ‰‹åˆ»ã€‚n8n è®“é€™æ®µè„ˆçµ¡å·¥ç¨‹è®Šå¾—å¾ˆè¼•é¬†ã€‚é€™å…¶å¯¦æ˜¯è„ˆçµ¡å·¥ç¨‹è£¡å¾ˆå®¹æ˜“è¢«å¿½ç•¥ã€ä½†åˆéå¸¸é—œéµçš„ä¸€ç’°ï¼šä¸€æ—¦ agent çš„è¼¸å‡ºä¸å¤ ä¸€è‡´ï¼Œåˆå¿…é ˆä»¥ç‰¹å®šæ ¼å¼å‚³çµ¦ä¸‹ä¸€å€‹å…ƒä»¶ï¼Œé€™å€‹åšæ³•å°±æœƒéå¸¸æœ‰å¨åŠ›ã€‚

### **Tools**

å› ç‚ºæˆ‘å€‘ç”¨ n8n å»º agentï¼Œæ‰€ä»¥è¦æŠŠã€Œç›®å‰æ—¥æœŸèˆ‡æ™‚é–“ã€æ”¾é€²è„ˆçµ¡è£¡å¾ˆç°¡å–®ï¼Œå¯ä»¥é€™æ¨£åšï¼š

```
The current date and time is: {{ $now.toISO() }}
```

é€™æ˜¯ä¸€å€‹ n8n å…§å‘¼å«çš„ç°¡å–®å‡½å¼ï¼Œä½†åœ¨æ›´ä¸€èˆ¬çš„ç³»çµ±è£¡ï¼Œé€šå¸¸æœƒåšæˆä¸€å€‹ç¨ç«‹å·¥å…·ï¼ˆtoolï¼‰ï¼Œè®“ç³»çµ±åœ¨éœ€è¦æ™‚æ‰å»å–æ—¥æœŸæ™‚é–“ï¼ˆä¹Ÿå°±æ˜¯è®“è¡Œç‚ºæ›´å‹•æ…‹ï¼‰ã€‚é€™ä¹Ÿæ˜¯è„ˆçµ¡å·¥ç¨‹çš„ç²¾ç¥ï¼šè¿«ä½¿å»ºæ§‹è€…åšå‡ºæ˜ç¢ºæ±ºç­–â”€â”€å“ªäº›è„ˆçµ¡è©²å‚³ã€ä»€éº¼æ™‚å€™è©²å‚³çµ¦ LLMã€‚é€™å¾ˆæ£’ï¼Œå› ç‚ºå¯ä»¥æ¸›å°‘æ‡‰ç”¨ä¸­çš„å‡è¨­èˆ‡ä¸ç²¾ç¢ºã€‚

æ—¥æœŸèˆ‡æ™‚é–“å°ç³»çµ±ä¾†èªªå¾ˆé‡è¦ï¼›å¦å‰‡é‡åˆ°éœ€è¦ç†è§£ã€Œç¾åœ¨æ™‚é–“ã€çš„æŸ¥è©¢æ™‚ï¼Œæ¨¡å‹å¾€å¾€è¡¨ç¾ä¸å¥½ã€‚èˆ‰ä¾‹ä¾†èªªï¼Œè‹¥è¦æ±‚ç³»çµ±æœå°‹ã€Œä¸Šé€±ã€OpenAI çš„æœ€æ–°é–‹ç™¼è€…æ–°èï¼Œå®ƒå¾ˆå¯èƒ½æœƒè‡ªå·±äº‚çŒœæ—¥æœŸå€é–“ï¼Œå°è‡´æœå°‹æŸ¥è©¢å“è³ªä¸‹é™ï¼Œé€²è€Œè®“ç¶²è·¯æœå°‹çµæœä¸æº–ã€‚ç•¶ç³»çµ±èƒ½æ‹¿åˆ°æ­£ç¢ºçš„æ—¥æœŸæ™‚é–“ï¼Œå°±èƒ½æ›´å¥½åœ°æ¨è«– date rangesï¼ˆå° search agent èˆ‡å·¥å…·ä¾†èªªå¾ˆé—œéµï¼‰ã€‚å› æ­¤æˆ‘æŠŠä¸‹é¢é€™æ®µåŠ é€²è„ˆçµ¡ï¼Œè®“ LLM èƒ½ç”¢ç”Ÿæ—¥æœŸç¯„åœï¼š

```
After obtaining the above subtasks information, you will add two extra fields. Those correspond to start_date and end_date. Infer this information given the current date and the time_period selected. start_date and end_date should use the format as in the example below:

"start_date": "2024-06-03T06:00:00.000Z",
"end_date": "2024-06-11T05:59:59.999Z",
```

å› ç‚ºé€™è£¡èšç„¦åœ¨æ¶æ§‹ä¸­çš„ planning agentï¼Œæ‰€ä»¥ä¸éœ€è¦åŠ å…¥å¤ªå¤šå·¥å…·ã€‚å”¯ä¸€å¦ä¸€å€‹æœ‰æ„ç¾©çš„å·¥å…·ï¼Œæ˜¯ä¸€å€‹ retrieval toolï¼šèƒ½æ ¹æ“š query å–å›ç›¸é—œ subtasksã€‚ä¸‹é¢ä¾†è«‡é€™å€‹æƒ³æ³•ã€‚

### **RAG & Memory**

æˆ‘åšçš„ç¬¬ä¸€ç‰ˆ deep research æ‡‰ç”¨ä¸éœ€è¦çŸ­æœŸè¨˜æ†¶ï¼Œä½†æˆ‘å€‘åšäº†å¦ä¸€å€‹ç‰ˆæœ¬ï¼šæœƒé‡å°ä¸åŒä½¿ç”¨è€…æŸ¥è©¢å¿«å– subqueriesã€‚é€™æœ‰åŠ©æ–¼åœ¨ workflow ä¸­é”æˆåŠ é€Ÿèˆ‡ä¸€äº›æœ€ä½³åŒ–ã€‚å¦‚æœä½¿ç”¨è€…ä»¥å‰å•éé¡ä¼¼å•é¡Œï¼Œå°±èƒ½æŠŠçµæœå­˜åˆ° vector storeï¼Œä¸¦åœ¨ä¸‹æ¬¡æŸ¥è©¢æ™‚ç›´æ¥æœå°‹ï¼›å¦‚æ­¤ä¸€ä¾†å°±ä¸å¿…é‡æ–°ç”¢ç”Ÿä¸€ä»½å·²ç¶“å­˜åœ¨çš„ subqueries è¨ˆç•«ã€‚è¦è¨˜å¾—ï¼šæ¯å‘¼å«ä¸€æ¬¡ LLM APIï¼Œå°±æœƒå¢åŠ å»¶é²èˆ‡æˆæœ¬ã€‚

é€™å°±æ˜¯è°æ˜çš„è„ˆçµ¡å·¥ç¨‹ï¼šè®“æ‡‰ç”¨æ›´å‹•æ…‹ã€æ›´ä¾¿å®œã€æ›´æœ‰æ•ˆç‡ã€‚è„ˆçµ¡å·¥ç¨‹ä¸åªæ˜¯æœ€ä½³åŒ–æç¤ºè©ï¼Œæ›´æ˜¯åœ¨é‡å°ç›®æ¨™ï¼Œé¸æ“‡ã€Œæœ€é©åˆçš„è„ˆçµ¡ã€ã€‚ä¹Ÿå¯ä»¥æ›´æœ‰å‰µæ„ï¼šä¾‹å¦‚å¦‚ä½•ç¶­è­· vector storeï¼Œä»¥åŠå¦‚ä½•æŠŠæ—¢æœ‰ subtasks æ‹‰é€²æç¤ºè©è„ˆçµ¡ã€‚èƒ½åšå‡ºæ–°ç©åˆæœ‰æ•ˆçš„è„ˆçµ¡å·¥ç¨‹ï¼Œæ‰æ˜¯çœŸæ­£çš„è­·åŸæ²³ï¼

### **States & Historical Context**

åœ¨ deep research agent çš„ v1 æˆ‘å€‘æ²’æœ‰å±•ç¤ºé€™éƒ¨åˆ†ï¼Œä½†é€™å€‹å°ˆæ¡ˆå¦ä¸€å€‹é‡è¦å·¥ä½œï¼Œæ˜¯æœ€ä½³åŒ–æœ€çµ‚å ±å‘Šçš„ç”¢å‡ºæµç¨‹ã€‚å¾ˆå¤šæƒ…æ³ä¸‹ï¼Œagentic system éœ€è¦åè¦†ä¿®æ­£å…¨éƒ¨æˆ–éƒ¨åˆ† queryã€subtasksï¼Œç”šè‡³æ˜¯å¾ web search APIs æ‹‰å›ä¾†çš„è³‡æ–™ã€‚é€™ä»£è¡¨ç³»çµ±æœƒå°åŒä¸€å€‹å•é¡Œå˜—è©¦å¤šæ¬¡ï¼Œä¸¦ä¸”éœ€è¦å­˜å–å…ˆå‰çš„ statesï¼Œä»¥åŠï¼ˆå¯èƒ½ï¼‰æ•´å€‹ç³»çµ±çš„æ­·å²è„ˆçµ¡ã€‚

é€™åœ¨æˆ‘å€‘çš„ use case è£¡ä»£è¡¨ä»€éº¼ï¼Ÿåœ¨é€™å€‹ä¾‹å­ä¸­ï¼Œå¯èƒ½éœ€è¦è®“ agent èƒ½å­˜å– subtasks çš„ç‹€æ…‹ã€ä¿®æ­£ç‰ˆï¼ˆè‹¥æœ‰ï¼‰ã€workflow ä¸­å„å€‹ agent çš„å…ˆå‰çµæœï¼Œé‚„æœ‰ä»»ä½•èƒ½å¹«åŠ©å®ƒåœ¨ revision éšæ®µåšå‡ºæ›´å¥½æ±ºç­–çš„è„ˆçµ¡ã€‚è‡³æ–¼åˆ°åº•è¦å‚³å“ªäº›æ­·å²è„ˆçµ¡ï¼Œå‰‡å–æ±ºæ–¼è¦æœ€ä½³åŒ–çš„ç›®æ¨™æ˜¯ä»€éº¼ã€‚é€™è£¡æœƒç‰½æ¶‰å¾ˆå¤šæ±ºç­–ã€‚è„ˆçµ¡å·¥ç¨‹ä¸ç¸½æ˜¯ç›´è¦ºæˆ–ä¸€æ¬¡åˆ°ä½ï¼Œå…‰æ˜¯é€™å€‹å…ƒä»¶å°±å¾ˆå®¹æ˜“éœ€è¦åè¦†èª¿æ•´å¤šæ¬¡ã€‚ä¹Ÿå› æ­¤æˆ‘ä¸€ç›´å¼·èª¿ eval çš„é‡è¦æ€§ï¼šå¦‚æœæ²’æœ‰é‡æ¸¬ï¼Œè¦å¦‚ä½•åˆ¤æ–·è„ˆçµ¡å·¥ç¨‹çš„åŠªåŠ›åˆ°åº•æœ‰æ²’æœ‰å¸¶ä¾†æ•ˆæœï¼Ÿ


## **Advanced Context Engineering \[WIP\]**

é€™ç¯‡æ–‡ç« é‚„æ²’æ¶µè“‹è„ˆçµ¡å·¥ç¨‹çš„å…¶ä»–é¢å‘ï¼Œä¾‹å¦‚è„ˆçµ¡å£“ç¸®ï¼ˆcontext compressionï¼‰ã€è„ˆçµ¡ç®¡ç†æŠ€å·§ã€è„ˆçµ¡å®‰å…¨ï¼Œä»¥åŠè©•ä¼°è„ˆçµ¡æœ‰æ•ˆæ€§ï¼ˆä¹Ÿå°±æ˜¯éš¨æ™‚é–“é‡æ¸¬é€™äº›è„ˆçµ¡æ˜¯å¦ä»ç„¶æœ‰æ•ˆï¼‰ã€‚æœªä¾†æ–‡ç« æœƒå†åˆ†äº«æ›´å¤šæƒ³æ³•ã€‚

è„ˆçµ¡å¯èƒ½è¢«ç¨€é‡‹æˆ–è®Šå¾—ä½æ•ˆï¼ˆä¾‹å¦‚ï¼šæ··å…¥éæ™‚æˆ–ä¸ç›¸é—œçš„è³‡è¨Šï¼‰ï¼Œé€™éœ€è¦ç‰¹åˆ¥çš„è©•ä¼° workflow ä¾†æ•æ‰é€™äº›å•é¡Œã€‚

æˆ‘é æœŸè„ˆçµ¡å·¥ç¨‹æœƒæŒçºŒæˆç‚º AI é–‹ç™¼è€…ï¼å·¥ç¨‹å¸«çš„é‡è¦æŠ€èƒ½ã€‚é™¤äº†æ‰‹å‹•è„ˆçµ¡å·¥ç¨‹ä¹‹å¤–ï¼Œä¹Ÿæœ‰æ©Ÿæœƒå»ºç«‹æ–¹æ³•ä¾†è‡ªå‹•åŒ–è„ˆçµ¡å·¥ç¨‹ä¸­çš„æœ‰æ•ˆæµç¨‹ã€‚ç›®å‰å·²ç¶“çœ‹éä¸€äº›å·¥å…·å˜—è©¦å¾€é€™æ–¹å‘èµ°ï¼Œä½†é€™å€‹é ˜åŸŸä»éœ€è¦æ›´å¤§çš„é€²å±•ã€‚

<Callout type="info" emoji="ğŸ“">
  æœ¬ç¯‡å…§å®¹æ•´ç†è‡ªæˆ‘å€‘çš„æ–°èª²ç¨‹ ["Building Effective AI Agents with n8n"](https://dair-ai.thinkific.com/courses/agents-with-n8n)ï¼Œèª²ç¨‹ä¸­æä¾›æ›´å®Œæ•´çš„æ´è¦‹ã€å¯ä¸‹è¼‰ç¯„æœ¬ã€æç¤ºè©ã€ä»¥åŠè¨­è¨ˆèˆ‡å¯¦ä½œ agentic systems çš„é€²éšæŠ€å·§ã€‚

  <strong>è¼¸å…¥å„ªæƒ ç¢¼ <code>PROMPTING20</code> å¯äº« Pro æœƒå“¡ 8 æŠ˜å„ªæƒ ã€‚</strong>
</Callout>

## **Resources**

ä»¥ä¸‹æ•´ç†ä¸€äº›è¿‘æœŸç”±å…¶ä»–ä½œè€…æ’°å¯«ã€æ¨è–¦çš„è„ˆçµ¡å·¥ç¨‹å»¶ä¼¸é–±è®€ï¼š

* [https://rlancemartin.github.io/2025/06/23/context\_engineering/](https://rlancemartin.github.io/2025/06/23/context_engineering/)
* [https://x.com/karpathy/status/1937902205765607626](https://x.com/karpathy/status/1937902205765607626)
* [https://www.philschmid.de/context-engineering](https://www.philschmid.de/context-engineering)
* [https://simple.ai/p/the-skill-thats-replacing-prompt-engineering?](https://simple.ai/p/the-skill-thats-replacing-prompt-engineering?)
* [https://github.com/humanlayer/12-factor-agents](https://github.com/humanlayer/12-factor-agents)
* [https://blog.langchain.com/the-rise-of-context-engineering/](https://blog.langchain.com/the-rise-of-context-engineering/)


import { Callout } from 'nextra/components'
